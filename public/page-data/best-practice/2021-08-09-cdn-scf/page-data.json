{"componentChunkName":"component---src-templates-best-practice-detail-tsx","path":"/best-practice/2021-08-09-cdn-scf","result":{"data":{"currentBlog":{"id":"0bf282d4-a8cd-5d85-a4a5-800674217ae6","frontmatter":{"thumbnail":"https://main.qcloudimg.com/raw/df4800b88b1c76a8a4b288a7ec037b8d.jpg","authors":["希蒂恩、kbjlchen"],"categories":["best-practice"],"date":"2021-08-11T00:00:00.000Z","title":"CDN 联合云函数 SCF，轻松实现定时刷新、预热任务","description":"插件中心是腾讯云 CDN 的增值插件功能的大本营，全新上线：定时刷新预热、APK 动态打包、区域访问控制！","authorslink":null,"translators":null,"translatorslink":null,"tags":["Serverless","云函数"],"keywords":null,"outdated":null},"wordCount":{"words":173,"sentences":32,"paragraphs":32},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/best-practice/2021-08-09-cdn-scf.md","fields":{"slug":"/best-practice/2021-08-09-cdn-scf/","keywords":["serverless","云函数","预热","刷新","插件","定时"]},"html":"<p>插件中心是腾讯云 CDN 的增值插件功能的大本营，主要聚焦 <strong>内容处理</strong> 和 <strong>内容安全</strong> 方向，通过总结腾讯云 CDN 服务于各行各业的经验，提炼行业共性需求，为用户们提供具有独特价值的增值服务能力。经过 CDN 和 SCF 产研团队数月的创新和打磨，目前已上线三个功能：<strong>定时刷新预热、APK 动态打包、区域访问</strong> 控制！</p>\n<h2 id=\"01-定时刷新预热\" style=\"position:relative;\"><a href=\"#01-%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0%E9%A2%84%E7%83%AD\" aria-label=\"01 定时刷新预热 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>01. 定时刷新预热</h2>\n<p><strong>1. 使用场景</strong></p>\n<ul>\n<li><strong>刷新</strong></li>\n</ul>\n<p>当源站储存的业务内容有更新或需要下架违规资源时，可以通过提交刷新请求将 CDN 节点上指定的缓存内容强制过期。当用户再次访问时，CDN 节点将回源获取已更新内容返回给用户并在节点缓存最新资源。</p>\n<ul>\n<li><strong>预热</strong></li>\n</ul>\n<p>当新版本安装包或升级包发布前或运营活动发布前，提前将资源预热缓存至 CDN 加速节点，当用户发起访问请求时，可以直接从 CDN 节点获取，有效地降低回源率，提升用户体验。</p>\n<p>刷新和预热是 CDN 用户的常用功能，对于频繁更新业务内容的游戏、电商、资讯等行业用户来说，手动进行刷新预热十分繁琐，稍有不慎就可能损害用户访问体验，定时刷新预热可以很好地解决这个问题，通过 <strong>联动云函数 SCF，实现定时 CDN 刷新、预热任务的配置</strong>。增加内容存缓存处理任务的灵活度，同时通过支持 txt 文件拖曳，优化了操作体验。</p>\n<p><strong>2. 配置说明</strong></p>\n<ol>\n<li>登录 CDN 控制台，在菜单栏里选择<strong>「插件中心」</strong>，单击<strong>「定时刷新预热」</strong>插件功能卡片即可开通。</li>\n<li>CDN 控制台地址：<a href=\"https://console.cloud.tencent.com/cdn\">https://console.cloud.tencent.com/cdn</a></li>\n<li>首次开通后，也可以单击卡片底部的<strong>「基础配置」</strong>进入定时刷新预热的任务列表，进行相关配置。</li>\n</ol>\n<img src=\"https://main.qcloudimg.com/raw/1a081041a5d07cd22f8d1c07b767b717.png\" width=\"700\">\n<ol start=\"3\">\n<li>在新建定时任务界面，选择相应的任务类型、设置 Cron 定时表达式（见下文）、输入对应的刷新 / 预热 URL，并进行 SCF 授权，系统即可自动生成对应的 SCF 云函数，并按时触发对应的任务。</li>\n</ol>\n<img src=\"https://main.qcloudimg.com/raw/8312daea92a96f84ec61e7be1a277b66.png\" width=\"700\">\n<img src=\"https://main.qcloudimg.com/raw/ae96ffa3255627ab9785c31fb7a9509d.png\" width=\"700\">\n<ol start=\"4\">\n<li>在任务状态页面，可以查看定时任务最近一次的执行情况。</li>\n</ol>\n<img src=\"https://main.qcloudimg.com/raw/0e4d5f4b59555b54941b5889233b9750.png\" width=\"700\">\n<h2 id=\"02-区域访问控制限免\" style=\"position:relative;\"><a href=\"#02-%E5%8C%BA%E5%9F%9F%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E9%99%90%E5%85%8D\" aria-label=\"02 区域访问控制限免 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02. 区域访问控制（限免）</h2>\n<p><strong>1. 使用场景</strong></p>\n<p>在业务中是否遇到过如下情况？</p>\n<ul>\n<li>业务频繁遭受攻击，查看请求源代码时发现攻击都来自同一个地区...</li>\n<li>对于具有区域版权的业务内容，需要严格控制访问区域，避免引起版权风险...</li>\n</ul>\n<p>区域访问控制通过 Client IP 识别终端用户所在地，允许客户针对全部内容或者指定目录，设置各区域终端用户的访问权限，有效抵御固定区域的攻击行为，保护版权。</p>\n<p><strong>2. 配置说明</strong></p>\n<ol>\n<li>登录 CDN 控制台，在菜单栏里选择「域名管理」，单击域名右侧「管理」，即可进入域名配置页面，在第二栏「访问控制」中可看到区域访问控制。</li>\n<li>CDN 控制台地址：<a href=\"https://console.cloud.tencent.com/cdn\">https://console.cloud.tencent.com/cdn</a></li>\n<li>首次打开须跳转至插件中心首页，打开「区域访问控制」插件功能后，再回到域名管理进行配置。</li>\n<li>区域访问控制允许针对全部内容 / 指定目录设置黑白名单，终端用户所在区域可以多选。</li>\n</ol>\n<img src=\"https://main.qcloudimg.com/raw/9f281bb9239fb4e34cc83d66f4637f37.png\" width=\"700\">\n<p>腾讯云 CDN 插件中心将持续聚焦内容安全和内容处理，计划推出 Cookie 认证、远程异步鉴权等功能，敬请期待！</p>\n<img src=\"https://main.qcloudimg.com/raw/62ba88fb4e3cdabb00a755edb9a858b4.png\" width=\"700\">\n<hr>\n<blockquote>\n<p><strong>传送门：</strong></p>\n<ul>\n<li>GitHub: <a href=\"https://github.com/serverless/serverless/blob/master/README_CN.md\">github.com/serverless</a></li>\n<li>官网：<a href=\"https://serverless.com/\">serverless.com</a></li>\n</ul>\n</blockquote>\n<p>欢迎访问：<a href=\"https://serverlesscloud.cn/\">Serverless 中文网</a>，您可以在 <a href=\"https://serverlesscloud.cn/best-practice\">最佳实践</a> 里体验更多关于 Serverless 应用的开发！</p>","tableOfContents":"<ul>\n<li><a href=\"/best-practice/2021-08-09-cdn-scf/#01-%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0%E9%A2%84%E7%83%AD\">01. 定时刷新预热</a></li>\n<li><a href=\"/best-practice/2021-08-09-cdn-scf/#02-%E5%8C%BA%E5%9F%9F%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E9%99%90%E5%85%8D\">02. 区域访问控制（限免）</a></li>\n</ul>"},"previousBlog":{"id":"55d5414a-4ba1-5203-b80f-700df23bf07a","frontmatter":{"thumbnail":"https://main.qcloudimg.com/raw/e5b06897df1c1710162a159dc75fe6fd.jpg","authors":["腾讯云 IDaaS x 云函数"],"categories":["best-practice"],"date":"2021-08-17T00:00:00.000Z","title":"腾讯云 IDaaS + 云函数，不到 10 行代码解决企业身份难题","description":"如何快速集成腾讯云 IDaaS 的 SSO 能力，适用于企业内部快速开发产品企业应用的场景","authorslink":null,"translators":null,"translatorslink":null,"tags":["Serverless","云函数"],"keywords":null,"outdated":null},"wordCount":{"words":225,"sentences":40,"paragraphs":40},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/best-practice/2021-08-17-idaas-scf.md","fields":{"slug":"/best-practice/2021-08-17-idaas-scf/","keywords":["serverless","云函数","云原生","腾讯","身份","应用"]}},"nextBlog":{"id":"effc29bc-c29f-584c-b342-625e1cb372c6","frontmatter":{"thumbnail":"https://main.qcloudimg.com/raw/e92240ba73236d632fcaa13eb24182f3.jpg","authors":["吴宜展、毛勤斌"],"categories":["best-practice"],"date":"2021-08-11T00:00:00.000Z","title":"使用腾讯云 API 网关实现多维度精细化限流","description":"使用腾讯云 API 网关实现多维度，精细化的限流，最大程度上保护您的业务安全。","authorslink":null,"translators":null,"translatorslink":null,"tags":["Serverless","云函数"],"keywords":null,"outdated":null},"wordCount":{"words":288,"sentences":50,"paragraphs":50},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/best-practice/2021-08-11-api.md","fields":{"slug":"/best-practice/2021-08-11-api/","keywords":["serverless","限流","网关","插件","流量"]}}},"pageContext":{"blogId":"0bf282d4-a8cd-5d85-a4a5-800674217ae6","previousBlogId":"55d5414a-4ba1-5203-b80f-700df23bf07a","nextBlogId":"effc29bc-c29f-584c-b342-625e1cb372c6"}},"staticQueryHashes":["126728070","2100134136"]}