{"componentChunkName":"component---src-templates-blog-detail-tsx","path":"/blog/2020-10-24-maimai","result":{"data":{"currentBlog":{"id":"02c7ba25-6867-540a-9f8c-8db94e76b912","frontmatter":{"thumbnail":"https://img.serverlesscloud.cn/2020115/1604567602988-WX20201105-160934.jpg","authors":["è¿œå“¥åˆ¶é€ "],"categories":["user-stories"],"date":"2020-10-24T00:00:00.000Z","title":"äºŒæ¬¡å…ƒçœ‹è¿‡æ¥ï¼åŸºäº Serverless çš„èˆèŒéŸ³æ¸¸æŸ¥åˆ†å™¨","description":"Serverless å’ŒéŸ³ä¹æ¸¸æˆè¹¦å‡ºæ–°ç«èŠ±ğŸ”¥","authorslink":["https://www.yuangezhizao.cn/articles/python/flask/serverless/maimai_DX_CN_probe.html"],"translators":null,"translatorslink":null,"tags":["Serverless","äºŒæ¬¡å…ƒ"],"keywords":null,"outdated":null},"wordCount":{"words":470,"sentences":98,"paragraphs":95},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2020-10-24-maimai.md","fields":{"slug":"/blog/2020-10-24-maimai/","keywords":["go","postgresql","python","serverless","æ— æœåŠ¡å™¨","äº‘å‡½æ•°","wsgi","maimai","requirements","Flask","serverless"]},"html":"<h2 id=\"å‰è¨€\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å‰è¨€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å‰è¨€</h2>\n<p>ç¤¾ç•œä¸‹ç­æ—¶åˆ·å¾®ä¿¡æ—¶çœ‹åˆ°äº†<a href=\"https://web.archive.org/web/20201020122345/https://mp.weixin.qq.com/s/jaCLx6gn3aHbLLptXvqsLQ\">Serverless æœ‰ä¸€ç™¾ç§ç©æ³•ï¼Œæ¯”å¥½ç©æ›´å¥½ç©</a>è¿™ç¯‡æ¨é€ï¼Œæ­£å·§è‡ªå·±æœ€è¿‘æ–­æ–­ç»­ç»­åœ¨å†™éŸ³æ¸¸çš„å†å²è®°å½•å­˜æ¡£ï¼Œè¶ç€è¿™ä¸ªæœºä¼šå†³å®šå‚åŠ è¿™æ¬¡åº”ç”¨å¼€å‘ã€‚</p>\n<p><strong>ä¸€ã€ä»€ä¹ˆæ˜¯ Serverless Framework</strong></p>\n<blockquote>\n<p><code class=\"language-text\">Serverless Framework</code> æ˜¯ä¸šç•Œéå¸¸å—æ¬¢è¿çš„æ— æœåŠ¡å™¨åº”ç”¨æ¡†æ¶ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒåº•å±‚èµ„æºå³å¯éƒ¨ç½²å®Œæ•´å¯ç”¨çš„ <code class=\"language-text\">Serverless</code> åº”ç”¨æ¶æ„ã€‚<code class=\"language-text\">Serverless Framework</code> å…·æœ‰èµ„æºç¼–æ’ã€è‡ªåŠ¨ä¼¸ç¼©ã€äº‹ä»¶é©±åŠ¨ç­‰èƒ½åŠ›ï¼Œè¦†ç›–ç¼–ç ã€è°ƒè¯•ã€æµ‹è¯•ã€éƒ¨ç½²ç­‰å…¨ç”Ÿå‘½å‘¨æœŸï¼Œå¸®åŠ©å¼€å‘è€…é€šè¿‡è”åŠ¨äº‘èµ„æºï¼Œè¿…é€Ÿæ„å»º <code class=\"language-text\">Serverless</code> åº”ç”¨</p>\n</blockquote>\n<p>æ²¡é”™ï¼Œå°±åƒå‡ å¤©å‰çœ‹åˆ°çš„ã€ŠServerless ä¹‹æ­Œã€‹é‡Œé¢æ‰€è¯´ <code class=\"language-text\">I'm gonna reduce your ops</code>ï¼Œå®ƒèƒ½å¤§å¹…åº¦å‡è½»è¿ç»´å‹åŠ›ï¼Œé‚£å°±å¼€å§‹åŠ¨æ‰‹å§ï¼æ³¨æ„å¼€å‘ç¯å¢ƒéœ€ <code class=\"language-text\">Node.js 10.0+</code>ï¼Œä¸€é”®å…¨å±€å®‰è£…ï¼š<code class=\"language-text\">npm install -g serverless</code></p>\n<p><strong>äºŒã€è…¾è®¯äº‘ Flask Serverless Component ç®€ä»‹</strong></p>\n<blockquote>\n<p>è…¾è®¯äº‘ <code class=\"language-text\">Flask Serverless Component</code>ï¼Œæ”¯æŒ <code class=\"language-text\">Restful API</code> æœåŠ¡çš„éƒ¨ç½²</p>\n</blockquote>\n<p>æŒ‰ç…§æƒ¯ä¾‹é¦–å…ˆæ¥éƒ¨ç½² <code class=\"language-text\">demo</code> å§</p>\n<ol>\n<li>æœ¬åœ° <code class=\"language-text\">PyCharm</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ <code class=\"language-text\">Flask</code> é¡¹ç›®</li>\n</ol>\n<p><img src=\"https://img.serverlesscloud.cn/20201111/1605082790529-QQ20201020-212721%402x.png%21webp\" alt=\"Flask\"></p>\n<ol start=\"2\">\n<li>æ‰‹åŠ¨åˆ›å»ºå†…å®¹ä¸º <code class=\"language-text\">Flask</code> çš„ <code class=\"language-text\">requirements.txt</code></li>\n<li>æŒ‰ç…§<a href=\"https://github.com/serverless-components/tencent-flask/blob/master/docs/configure.md\">é…ç½®æ–‡æ¡£</a>åˆ›å»º <code class=\"language-text\">serverless.yml</code>ï¼Œä¾‹å¦‚æœ¬é¡¹ç›®å®é™…ä½¿ç”¨çš„å®Œæ•´å†…å®¹ï¼Œåˆæ¬¡ä½¿ç”¨å¯è‡ªè¡Œé…Œæƒ…ç®€åŒ–</li>\n<li>å°†å¯†åŒ™å†™å…¥ <code class=\"language-text\">.env</code>ï¼ˆå½“ç„¶ï¼Œéƒ¨ç½²çš„æ—¶å€™ä¹Ÿå¯ä»¥é€‰æ‹©å¾®ä¿¡æ‰«ç æˆæƒï¼‰</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"89541096536338530000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`TENCENT_SECRET_ID=<rm>\nTENCENT_SECRET_KEY=<rm>`, `89541096536338530000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">TENCENT_SECRET_ID</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>rm<span class=\"token operator\">></span>\n<span class=\"token assign-left variable\">TENCENT_SECRET_KEY</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>rm<span class=\"token operator\">></span></code></pre></div>\n<p><img src=\"https://img.serverlesscloud.cn/20201111/1605082869319-QQ20201020-225316%402x.png%21webp\" alt=\"æˆåŠŸéƒ¨ç½²\"></p>\n<p><img src=\"https://img.serverlesscloud.cn/20201111/1605082907209-QQ20201020-230006%402x.png%21webp\" alt=\"æˆåŠŸè®¿é—®\"></p>\n<p>è¿™æ ·åŸºäº <code class=\"language-text\">Serverless</code> çš„ <code class=\"language-text\">Flask Demo</code> å°±éƒ¨ç½²å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥ç»§ç»­æŒ‰ç…§è‡ªå·±çš„æ–¹å¼å†™å‰©ä¸‹çš„ä»£ç ã€‚</p>\n<p><strong>ä¸‰ã€maimai_DX</strong></p>\n<p><a href=\"https://mzh.moegirl.org.cn/zh-hans/Maimai%E7%B3%BB%E5%88%97\">maimai</a> æ˜¯ä¸€æ¬¾è¡—æœºéŸ³æ¸¸ã€‚</p>\n<p><img src=\"https://img.serverlesscloud.cn/2020115/1604563824205-WX20201105-160934%402x.jpg\"></p>\n<p>åœ¨è¿™é‡Œæ”¾ä¸€å¼ åŠ¨å›¾è‡ªè¡Œä½“ä¼šä¸€ä¸‹ï¼ŒåŸå§‹ç´ ææ¥è‡ª<a href=\"https://www.bilibili.com/video/av457219654\">ã€Œå¤–å½• maimaiã€QZKago Requiem Re:MASTER ALLPERFECT Player: Ruri*R</a></p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201024-213604-HD.gif!webp\" alt=\"QZKago\"></p>\n<blockquote>\n<ul>\n<li><a href=\"https://maimai.sega.jp/\">æ—¥æœ¬å®˜ç½‘</a></li>\n<li><a href=\"https://maimai.sega.com/\">æµ·å¤–å®˜ç½‘</a></li>\n</ul>\n</blockquote>\n<p>åœ¨å›½å†…ï¼Œåªèƒ½ä»å¾®ä¿¡å…¬ä¼—å·ä¸­æŸ¥çœ‹æˆç»©ï¼Œè€Œä¸”æ¯æ¬¡è¿›é¡µé¢éƒ½éœ€è¦å¾®ä¿¡çš„æˆæƒç™»å½•ï¼Œå¹¶ä¸”é‡Œé¢å­˜å‚¨çš„è®°å½•æœ‰æ¡æ•°é™åˆ¶ï¼Œ<code class=\"language-text\">ç›¸å†Œ</code>åªå­˜æœ€æ–° 10 æ¡ï¼Œ<code class=\"language-text\">æ¸¸æˆè®°å½•</code>åªå­˜æœ€æ–° 50 æ¡ï¼ˆå°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡ºçš„é‚£ç§ï¼‰ã€‚è¿™å°±æ˜¯æœ¬é¡¹ç›®çš„åˆè¡·ï¼Œè‡ªå·±æ‰“å‡ºæ¥çš„æ¯ä¸€æ¬¡æˆç»©éƒ½åº”è¯¥ä¿å­˜å¥½ã€‚</p>\n<h2 id=\"èˆèŒæŸ¥åˆ†å™¨\" style=\"position:relative;\"><a href=\"#%E8%88%9E%E8%90%8C%E6%9F%A5%E5%88%86%E5%99%A8\" aria-label=\"èˆèŒæŸ¥åˆ†å™¨ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>èˆèŒæŸ¥åˆ†å™¨</h2>\n<p>æˆæœå±•ç¤ºäº†ï¼Œå‰ç«¯ <code class=\"language-text\">Fomantic-UI</code>ï¼Œåç«¯ <code class=\"language-text\">Flask</code>+<code class=\"language-text\">MySQL</code>ã€‚<code class=\"language-text\">gh</code> å¼€æºåœ°å€ï¼š<a href=\"https://github.com/yuangezhizao/maimai_DX_CN_probe\">https://github.com/yuangezhizao/maimai<em>DX</em>CN_probe</a>ï¼Œæ¬¢è¿ <code class=\"language-text\">watch</code>ã€<code class=\"language-text\">star</code>ã€<code class=\"language-text\">fork</code> &#x26; <code class=\"language-text\">pr</code>ï¼</p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20200515-185154@2x.png!webp\" alt=\"https://maimai.yuangezhizao.cn\"></p>\n<p>ç›®å‰å®è£…äº†å¦‚ä¸‹åŠŸèƒ½ï¼š</p>\n<ol>\n<li><a href=\"https://maimai.yuangezhizao.cn/wechat_archive\">wechat_archive</a>ä¸­åŒ…å« <code class=\"language-text\">ä¸»é¡µ</code>ï¼Œ<code class=\"language-text\">æ¸¸æˆæ•°æ®</code>ï¼Œ<code class=\"language-text\">ç›¸å†Œ</code> å’Œ <code class=\"language-text\">æ¸¸æˆè®°å½•</code>ï¼šå¯¹åŸå§‹ç½‘é¡µè¿›è¡Œäº†ä¿®æ”¹ï¼Œå¹¶ä¸”æ·»åŠ äº† <code class=\"language-text\">Highcharts</code> åº“å¯è§†åŒ–æ›²çº¿æ˜¾ç¤ºå˜åŒ–</li>\n<li><a href=\"https://maimai.yuangezhizao.cn/record\">record</a>åŒ…å« <code class=\"language-text\">è®°å½•ï¼ˆåˆ†é¡µï¼‰</code> å’Œ <code class=\"language-text\">å·®å¼‚ï¼ˆåˆ†é¡µï¼‰</code>ï¼šå³è‡ªå†™çš„å¿«é€Ÿé¢„è§ˆé¡µé¢ï¼Œæ˜¯æŸ¥çœ‹å†å²è®°å½•å’Œæˆç»©å˜åŒ–çš„éå¸¸å®ç”¨çš„åŠŸèƒ½</li>\n<li><a href=\"https://maimai.yuangezhizao.cn/info\">info</a>åŒ…å« <code class=\"language-text\">é“ºé¢åˆ—è¡¨</code>ï¼šå³å…¨éƒ¨é“ºé¢åŸºç¡€ä¿¡æ¯ï¼Œè¾“å‡ºåˆ°ä¸€ä¸ªé¡µé¢ä¸­ï¼Œæ–¹ä¾¿é¡µé¢å†…æœç´¢</li>\n</ol>\n<h2 id=\"å¼€å‘è¿‡ç¨‹\" style=\"position:relative;\"><a href=\"#%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B\" aria-label=\"å¼€å‘è¿‡ç¨‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å¼€å‘è¿‡ç¨‹</h2>\n<p>æ¥ä¸‹æ¥å°†æŒ‰ç…§æ—¶é—´çš„é¡ºåºï¼Œæè¿°ä¸€ä¸‹å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠå¦‚ä½•è§£å†³</p>\n<h3 id=\"1-serverless-framework-component-é…ç½®æ–‡ä»¶\" style=\"position:relative;\"><a href=\"#1-serverless-framework-component-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\" aria-label=\"1 serverless framework component é…ç½®æ–‡ä»¶ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <code class=\"language-text\">Serverless Framework Component</code> é…ç½®æ–‡ä»¶</h3>\n<p><code class=\"language-text\">Serverless Framework</code> ç°åœ¨æ˜¯ <code class=\"language-text\">V2</code> ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½æ²¿è¢­ä¹‹å‰ç‰ˆæœ¬çš„ <code class=\"language-text\">serverless.yml</code> é…ç½®æ–‡ä»¶ï¼Œéœ€è¦é‡æ–°å¯¹ç…§æ–‡æ¡£ä¿®æ”¹ã€‚</p>\n<p>a. ä¹‹å‰ç‰ˆæœ¬ä¼šæ ¹æ® <code class=\"language-text\">requirements.txt</code> è‡ªåŠ¨ä¸‹è½½ç¬¬ä¸‰æ–¹åº“åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ <code class=\"language-text\">.serverless</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹ä»¥å‚åŠ æœ€ç»ˆçš„ä¾èµ–æ‰“åŒ…ï¼Œå‹ç¼©æˆ <code class=\"language-text\">zip</code> æ–‡ä»¶å†æœ€ç»ˆä¸Šä¼ è‡³äº‘å‡½æ•°è¿è¡Œç¯å¢ƒ</p>\n<p>b. æœ€æ–°ç‰ˆæœ¬ä¸å†è‡ªåŠ¨ä¸‹è½½ï¼Œéœ€è¦è‡ªè¡Œå¤„ç†ã€‚å®˜æ–¹ç¤ºä¾‹çš„å‚è€ƒç”¨æ³•ï¼š<a href=\"https://github.com/serverless-components/tencent-flask/blob/49bc914fad091bad9202ac481042760509342b3d/example/serverless.yml#L8-L17\">hook</a></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"19708537115463877000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`  src:\n    # TODO: å®‰è£…pythoné¡¹ç›®ä¾èµ–åˆ°é¡¹ç›®å½“å‰ç›®å½•\n    hook: 'pip3 install -r requirements.txt -t ./requirements'\n    dist: ./\n    include:\n      - source: ./requirements\n        prefix: ../ # prefix, can make ./requirements files/dir to ./\n    exclude:\n      - .env\n      - 'requirements/**'`, `19708537115463877000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">  <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># TODO: å®‰è£…pythoné¡¹ç›®ä¾èµ–åˆ°é¡¹ç›®å½“å‰ç›®å½•</span>\n    <span class=\"token key atrule\">hook</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pip3 install -r requirements.txt -t ./requirements'</span>\n    <span class=\"token key atrule\">dist</span><span class=\"token punctuation\">:</span> ./\n    <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> ./requirements\n        <span class=\"token key atrule\">prefix</span><span class=\"token punctuation\">:</span> ../ <span class=\"token comment\"># prefix, can make ./requirements files/dir to ./</span>\n    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .env\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'requirements/**'</span></code></pre></div>\n<p>æ³¨é‡Šå†™çš„å¾ˆæ¸…æ¥šï¼Œä½¿ç”¨ <code class=\"language-text\">hook</code> å»æ ¹æ® <code class=\"language-text\">requirements.txt</code> ä¸‹è½½ç¬¬ä¸‰æ–¹åº“åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ <code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹ï¼Œé¿å…ç¬¬ä¸‰æ–¹åº“å¯¼è‡´æœ¬åœ°æ–‡ä»¶å¤¹ç®¡ç†æ··ä¹±ã€‚ç„¶å <code class=\"language-text\">include</code> ä¸­æŒ‡å®šäº†é¡¹ç›®ç›®å½•ä¸‹çš„ <code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹åœ¨äº‘ç«¯çš„ <code class=\"language-text\">prefix</code>ï¼Œå³å¯¹äºäº‘ç«¯çš„äº‘å‡½æ•°è¿è¡Œç¯å¢ƒï¼Œ<code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹ä¸­çš„ç¬¬ä¸‰æ–¹åº“å’Œé¡¹ç›®ç›®å½•æ˜¯åŒçº§çš„ï¼Œå¯ä»¥æ­£å¸¸å¯¼å…¥ä½¿ç”¨ã€‚å½“ç„¶äº†ï¼Œæœ¬åœ°è¿è¡Œä½¿ç”¨çš„æ˜¯å…¨å±€çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¹¶æœªç”¨åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ <code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹ã€‚</p>\n<h3 id=\"2-å±‚ç®¡ç†æ¦‚è¿°\" style=\"position:relative;\"><a href=\"#2-%E5%B1%82%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0\" aria-label=\"2 å±‚ç®¡ç†æ¦‚è¿° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. å±‚ç®¡ç†æ¦‚è¿°</h3>\n<p>å‰è€…ï¼ˆæŒ‡ bï¼‰æ˜¯ä¸€ä¸ªå¾ˆåˆç†çš„è®¾è®¡ï¼Œä¸è¿‡åœ¨å®é™…ç¯å¢ƒä¸­å´å‘ç°äº†æ–°çš„é—®é¢˜ã€‚å®Œå…¨ä¸€è‡´çš„é…ç½®æ–‡ä»¶</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"16991317095118074000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`  src:\n    hook: 'pip3 install -r ./src/requirements.txt -t ./src/requirements'\n    dist: ./src\n    include:\n      - source: ./requirements\n        prefix: ../\n    exclude:\n      - .env`, `16991317095118074000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">  <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">hook</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pip3 install -r ./src/requirements.txt -t ./src/requirements'</span>\n    <span class=\"token key atrule\">dist</span><span class=\"token punctuation\">:</span> ./src\n    <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> ./requirements\n        <span class=\"token key atrule\">prefix</span><span class=\"token punctuation\">:</span> ../\n    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .env</code></pre></div>\n<p>åœ¨ macOS ä¸‹æˆåŠŸéƒ¨ç½²ä¹‹åï¼Œäº‘ç«¯çš„äº‘å‡½æ•°ç¼–è¾‘å™¨ä¸­çœ‹åˆ° <code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œç¬¬ä¸‰æ–¹åº“å’Œé¡¹ç›®ç›®å½•æ˜¯åŒçº§çš„ï¼Œçš„ç¡®æ²¡é—®é¢˜ã€‚</p>\n<p>ä¸è¿‡åœ¨ Windows ä¸‹æˆåŠŸéƒ¨ç½²ä¹‹åï¼Œäº‘ç«¯çš„äº‘å‡½æ•°ç¼–è¾‘å™¨ä¸­çœ‹åˆ°äº† <code class=\"language-text\">requirements</code> æ–‡ä»¶å¤¹ï¼Ÿä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸‰æ–¹åº“å’Œé¡¹ç›®ç›®å½•éåŒçº§ï¼Œäºæ˜¯è®¿é—®å°±ä¼šå‡ºç° <code class=\"language-text\">no module found</code> çš„å¯¼å…¥æŠ¥é”™äº†â€¦â€¦</p>\n<p>åå¤å°è¯•ä¿®æ”¹ <code class=\"language-text\">prefix</code> ç­‰é…ç½®é¡¹åˆ°æœ€åä¹Ÿæ²¡æœ‰è°ƒè¯•æˆåŠŸï¼Œå› æ­¤åœ¨è¿™é‡Œæå‡ºä¸¤ç§è§£å†³æ–¹æ³•ï¼š</p>\n<p>a. ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼Œè®©æœ¬åœ°çš„ç¬¬ä¸‰æ–¹åº“å’Œé¡¹ç›®ç›®å½•åŒçº§å­˜åœ¨</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"41136246186990100000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`  src:\n    hook: 'pip3 install -r ./src/requirements.txt -t ./src'\n    dist: ./src\n    exclude:\n      - .env`, `41136246186990100000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">  <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">hook</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pip3 install -r ./src/requirements.txt -t ./src'</span>\n    <span class=\"token key atrule\">dist</span><span class=\"token punctuation\">:</span> ./src\n    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .env</code></pre></div>\n<p>ä¸è¿‡éšç€é¡¹ç›®å’Œç¬¬ä¸‰æ–¹åº“çš„æ‰©å¤§æ–‡ä»¶å¤¹ä¼šè¶Šæ¥è¶Šå¤šï¼Œéå¸¸ä¸ä¾¿äºç®¡ç†</p>\n<p>b. ä½¿ç”¨äº‘å‡½æ•°æä¾›çš„ <code class=\"language-text\">å±‚</code></p>\n<p>è™½ç„¶ <code class=\"language-text\">sls deploy</code> éƒ¨ç½²çš„é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å¦‚æœå¯ä»¥åœ¨éƒ¨ç½²æ—¶åªä¸Šä¼ é¡¹ç›®ä»£ç è€Œä¸å»å¤„ç†ä¾èµ–ä¸å°±æ›´å¥½äº†å˜›ï¼Œè¿™æ ·è·¨ç»ˆåä½œç«¯å¼€å‘åªéœ€è¦å…³å¿ƒé¡¹ç›®ä»£ç å°± <code class=\"language-text\">ok</code> äº†ï¼Œå†ä¹Ÿä¸éœ€è¦ç®¡ç†ä¾èµ–ï¼</p>\n<p>å¹¶ä¸”è¿˜æœ‰ä¸€ç‚¹ï¼Œæƒ³åœ¨ <code class=\"language-text\">SCF</code> æ§åˆ¶å°ä¸­åœ¨çº¿ç¼–è¾‘å‡½æ•°ä»£ç éœ€è¦å°†éƒ¨ç½²ç¨‹åºåŒ…ä¿æŒåœ¨ <code class=\"language-text\">10MB</code> ä»¥ä¸‹ï¼Œä¸è¦ä»¥ä¸ºåå…†å¾ˆå¤§ï¼Œå¾ˆå¿«å°±ç”¨å…‰ä¹Ÿæ˜¯å¯èƒ½çš„</p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201022-210610@2x.png!webp\" alt=\"ä»…æ˜¾ç¤ºå…¥å£æ–‡ä»¶\"></p>\n<p>å…·ä½“å¦‚ä½•æ“ä½œå‘¢ï¼Ÿé‚£å°±æ˜¯è¦å°†ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶å¤¹ç›´æ¥æ‰“åŒ…å¹¶åˆ›å»ºä¸ºå±‚ï¼Œåˆ™åœ¨å‡½æ•°ä»£ç ä¸­å¯ç›´æ¥é€šè¿‡ <code class=\"language-text\">import</code> å¼•ç”¨ï¼Œæ¯•ç«Ÿæœ‰äº›ç‰¹æ®Šåº“æ¯”å¦‚ <code class=\"language-text\">Brotli</code>ï¼ŒWindows ä¸‹æ²¡æœ‰ <code class=\"language-text\">vc++</code> çš„è¯å°±åªèƒ½å»<a href=\"https://lfd.uci.edu/~gohlke/pythonlibs\">https://lfd.uci.edu/~gohlke/pythonlibs</a>ä¸‹è½½ <code class=\"language-text\">wheel</code> å®‰è£…ã€‚</p>\n<p>macOS ä¸‹æ­£å¸¸å®‰è£…ä¹‹åä¼šå¾—åˆ° <code class=\"language-text\">_brotli.cpython-39-darwin.so</code>ï¼Œ<code class=\"language-text\">brotli.py</code> ä¸­å†ä»¥ <code class=\"language-text\">import _brotli</code> çš„å½¢å¼å¯¼å…¥ï¼Œä¸è¿‡åˆå‡ºæ–°é—®é¢˜äº†ï¼Œäº‘ç«¯ä¼šå¯¼å…¥æŠ¥é”™<code class=\"language-text\">ModuleNotFoundError: No module named '_brotli'\"</code></p>\n<blockquote>\n<p>å½“å‰ <code class=\"language-text\">SCF</code> çš„æ‰§è¡Œç¯å¢ƒå»ºç«‹åœ¨ä»¥ä¸‹åŸºç¡€ä¸Šï¼šæ ‡å‡† <code class=\"language-text\">CentOS 7.2</code></p>\n</blockquote>\n<p>ä¸ºäº†è§£å†³é—®é¢˜å°è¯•åœ¨ linux ç¯å¢ƒä¸‹æ‰“åŒ…ï¼Œæ‹¿èµ·æ‰‹å¤´çš„ <code class=\"language-text\">CentOS 8.2</code> äº‘ä¸»æœºå¼€å§‹æ“ä½œ</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"64906190526502750000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`pip3 install -r requirements.txt -t ./layer --upgrade\nzip -r layer.zip ./layer`, `64906190526502750000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip3 <span class=\"token function\">install</span> -r requirements.txt -t ./layer --upgrade\n<span class=\"token function\">zip</span> -r layer.zip ./layer</code></pre></div>\n<p>ç„¶åå°±å¯ä»¥æŠŠæ‰“åŒ…çš„ <code class=\"language-text\">layer.zip</code> ä¸‹è½½åˆ°æœ¬åœ°å†ä¼ ä¸Šå»äº†ï¼Œæš‚æ—¶å¯ä»¥ä¸€åŠ³æ°¸é€¸äº†ã€‚</p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201022-234808@2x.png!webp\" alt=\"å±‚è¯¦ç»†ä¿¡æ¯\"></p>\n<p>å¯¹äº†ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥ç§»é™¤ <code class=\"language-text\">hook</code> å¹¶æ·»åŠ  <code class=\"language-text\">layers</code> äº†</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"74082713702472560000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`  src:\n    src: ./src\n    exclude:\n      - .env\n      - '__pycache__/**'\n  layers:\n    - name: maimai_DX_CN_probe\n      version: 3`, `74082713702472560000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">  <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> ./src\n    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .env\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'__pycache__/**'</span>\n  <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maimai_DX_CN_probe\n      <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></code></pre></div>\n<blockquote>\n<p>å·²ç»‘å®šå±‚çš„å‡½æ•°è¢«è§¦å‘è¿è¡Œï¼Œå¯åŠ¨å¹¶å‘å®ä¾‹æ—¶ï¼Œå°†ä¼šè§£å‹åŠ è½½å‡½æ•°çš„è¿è¡Œä»£ç è‡³ <code class=\"language-text\">/var/user/</code> ç›®å½•ä¸‹ï¼ŒåŒæ—¶ä¼šå°†å±‚å†…å®¹è§£å‹åŠ è½½è‡³ <code class=\"language-text\">/opt</code> ç›®å½•ä¸‹ã€‚è‹¥éœ€ä½¿ç”¨æˆ–è®¿é—®çš„æ–‡ä»¶ <code class=\"language-text\">file</code>ï¼Œæ”¾ç½®åœ¨åˆ›å»ºå±‚æ—¶å‹ç¼©æ–‡ä»¶çš„æ ¹ç›®å½•ä¸‹ã€‚åˆ™åœ¨è§£å‹åŠ è½½åï¼Œå¯ç›´æ¥é€šè¿‡ç›®å½• <code class=\"language-text\">/opt/file</code> è®¿é—®åˆ°è¯¥æ–‡ä»¶ã€‚è‹¥åœ¨åˆ›å»ºå±‚æ—¶ï¼Œé€šè¿‡æ–‡ä»¶å¤¹è¿›è¡Œå‹ç¼© <code class=\"language-text\">dir/file</code>ï¼Œåˆ™åœ¨å‡½æ•°è¿è¡Œæ—¶éœ€é€šè¿‡ <code class=\"language-text\">/opt/dir/file</code> è®¿é—®å…·ä½“æ–‡ä»¶</p>\n</blockquote>\n<p>ä½“éªŒæ›´å¿«çš„éƒ¨ç½²é€Ÿåº¦å§ï¼å› ä¸ºç¬¬ä¸‰æ–¹åº“å·²ç»æ‰“åŒ…åœ¨â€œå±‚â€ä¸­äº†</p>\n<p>ä½†æ˜¯å¥‡æ€ªçš„æ˜¯ï¼Œåœ¨äº‘ç«¯å¯¼å…¥ä»»æ„ç¬¬ä¸‰æ–¹åº“å‡ä¼šæŠ¥é”™ï¼Œäºæ˜¯è°ƒè¯•ç€æŸ¥çœ‹ <code class=\"language-text\">path</code></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"55270237799386670000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`for path in sys.path:\n    print(path)\n\n/var/runtime/python3\n/var/user\n/opt\n/var/lang/python3/lib/python36.zip\n/var/lang/python3/lib/python3.6\n/var/lang/python3/lib/python3.6/lib-dynload\n/var/lang/python3/lib/python3.6/site-packages\n/var/lang/python3/lib/python3.6/site-packages/pip-18.0-py3.6.egg`, `55270237799386670000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">path</span> <span class=\"token keyword\">in</span> sys.path:\n    print<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n\n/var/runtime/python3\n/var/user\n/opt\n/var/lang/python3/lib/python36.zip\n/var/lang/python3/lib/python3.6\n/var/lang/python3/lib/python3.6/lib-dynload\n/var/lang/python3/lib/python3.6/site-packages\n/var/lang/python3/lib/python3.6/site-packages/pip-18.0-py3.6.egg</code></pre></div>\n<p>å†æŸ¥çœ‹ <code class=\"language-text\">opt</code></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"54613467821830095000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`import os\ndirs = os.listdir('/opt')\n\nfor file in dirs:\n   print(file)\n\nlayer`, `54613467821830095000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">import</span> os\n<span class=\"token function\">dirs</span> <span class=\"token operator\">=</span> os.listdir<span class=\"token punctuation\">(</span><span class=\"token string\">'/opt'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">file</span> <span class=\"token keyword\">in</span> dirs:\n   print<span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span>\n\nlayer</code></pre></div>\n<p>è¿™æ‰æç„¶å¤§æ‚Ÿï¼Œ<strong>æ‰“åŒ…æ—¶éœ€è¦åœ¨å½“å‰è·¯å¾„ç›´æ¥æ‰“åŒ…</strong>ã€‚ä¸Šä¼ ä¹‹åâ€œå±‚â€æ›´æ–°ä¸ºç‰ˆæœ¬ <code class=\"language-text\">2</code>ï¼Œä½†æ˜¯ <code class=\"language-text\">ModuleNotFoundError: No module named '_brotli'</code> æŠ¥é”™ä¾æ—§ï¼Œå¹¶ä¸”ç¡®è®¤ <code class=\"language-text\">_brotli.cpython-38-x86_64-linux-gnu.so</code> æ–‡ä»¶å®é™…å­˜åœ¨ã€‚</p>\n<p>è€Œåœ¨ <code class=\"language-text\">CentOS</code> å’Œ <code class=\"language-text\">macOS</code> ä¸Šæœ¬åœ°å¯¼å…¥å‡æ²¡æœ‰é—®é¢˜ï¼Œè¿™å¯å°±çŠ¯éš¾äº†ï¼Œåˆæƒ³åˆ°å¾ˆæœ‰å¯èƒ½æ˜¯ <code class=\"language-text\">python</code> ç‰ˆæœ¬çš„é—®é¢˜ï¼Œäºæ˜¯å»å¯»æ‰¾ç°æˆ <code class=\"language-text\">3.6</code> çš„ç¯å¢ƒï¼Œæ¯”å¦‚è¿™é‡Œï¼š</p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201022-233709@2x.png!webp\" alt=\"3.6.8\"></p>\n<p>å†å†æ¬¡ä¸Šä¼ ä¹‹åâ€œå±‚â€æ›´æ–°ä¸ºç‰ˆæœ¬ <code class=\"language-text\">3</code>ï¼Œè®¿é—®æˆåŠŸï¼è¯¾é¢˜ç»ˆäºè§£å†³ï¼ŒåŸæ¥æ˜¯éœ€è¦<strong>ç›¸åŒç‰ˆæœ¬</strong>çš„ <code class=\"language-text\">Python 3.6</code> è¿è¡Œç¯å¢ƒ</p>\n<h3 id=\"3è‡ªå®šä¹‰å…¥å£æ–‡ä»¶\" style=\"position:relative;\"><a href=\"#3%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6\" aria-label=\"3è‡ªå®šä¹‰å…¥å£æ–‡ä»¶ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.è‡ªå®šä¹‰å…¥å£æ–‡ä»¶</h3>\n<p><a href=\"https://github.com/serverless-components\">components</a>æºç <a href=\"https://github.com/serverless-components/tencent-flask/tree/master/src/_shims\">tencent-flask/src/_shims/</a>ä¸­çš„æ–‡ä»¶æ¯æ¬¡éƒ½ä¼šè¢«åŸå°ä¸åŠ¨åœ°é‡æ–°æ‰“åŒ…ä¸Šä¼ åˆ°äº‘ç«¯äº‘å‡½æ•°ä¸­ï¼Œç›®å‰æœ‰ä¸¤ä¸ªæ–‡ä»¶</p>\n<p>a. <code class=\"language-text\">severless_wsgi.py</code>ï¼Œä½œç”¨æ˜¯ <code class=\"language-text\">converts an AWS API Gateway proxied request to a WSGI request.</code>\n<code class=\"language-text\">WSGI</code>çš„å…¨ç§°æ˜¯<code class=\"language-text\">Python Web Server Gateway Interface</code>å³<code class=\"language-text\">Web æœåŠ¡å™¨ç½‘å…³æ¥å£</code>ï¼Œå®ƒæ˜¯ä¸º<code class=\"language-text\">Python</code>è¯­è¨€å®šä¹‰çš„<code class=\"language-text\">Web</code>æœåŠ¡å™¨å’Œ<code class=\"language-text\">Web</code>åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä¹‹é—´çš„ä¸€ç§ç®€å•è€Œé€šç”¨çš„æ¥å£</p>\n<p>b. <code class=\"language-text\">sl_handler.py</code>ï¼Œå°±æ˜¯é»˜è®¤çš„å…¥å£æ–‡ä»¶</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"63990767550855600000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`import app  # Replace with your actual application\nimport severless_wsgi\n\n# If you need to send additional content types as text, add then directly\n# to the whitelist:\n#\n# serverless_wsgi.TEXT_MIME_TYPES.append(&quot;application/custom+json&quot;)\n\ndef handler(event, context):\n    return severless_wsgi.handle_request(app.app, event, context)`, `63990767550855600000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> app  <span class=\"token comment\"># Replace with your actual application</span>\n<span class=\"token keyword\">import</span> severless_wsgi\n\n<span class=\"token comment\"># If you need to send additional content types as text, add then directly</span>\n<span class=\"token comment\"># to the whitelist:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># serverless_wsgi.TEXT_MIME_TYPES.append(\"application/custom+json\")</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> severless_wsgi<span class=\"token punctuation\">.</span>handle_request<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n<p>é’ˆå¯¹äºè‡ªå·±çš„é¡¹ç›®ï¼Œä½¿ç”¨äº† <code class=\"language-text\">Flask</code> çš„ <code class=\"language-text\">å·¥å‚å‡½æ•°</code>ï¼Œä¸ºäº†é¿å…æ¯æ¬¡éƒ½è¦åœ¨äº‘ç«¯äº‘å‡½æ•°ç¼–è¾‘å™¨ä¸­é‡æ–°ä¿®æ”¹ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯è‡ªå®šä¹‰å…¥å£æ–‡ä»¶ï¼š</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"77505432742765200000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`import severless_wsgi\n\nfrom maimai_DX_CN_probe import create_app  # Replace with your actual application\n\n\n# If you need to send additional content types as text, add then directly\n# to the whitelist:\n#\n# serverless_wsgi.TEXT_MIME_TYPES.append(&quot;application/custom+json&quot;)\n\ndef handler(event, context):\n    return severless_wsgi.handle_request(create_app(), event, context)`, `77505432742765200000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> severless_wsgi\n\n<span class=\"token keyword\">from</span> maimai_DX_CN_probe <span class=\"token keyword\">import</span> create_app  <span class=\"token comment\"># Replace with your actual application</span>\n\n\n<span class=\"token comment\"># If you need to send additional content types as text, add then directly</span>\n<span class=\"token comment\"># to the whitelist:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># serverless_wsgi.TEXT_MIME_TYPES.append(\"application/custom+json\")</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> severless_wsgi<span class=\"token punctuation\">.</span>handle_request<span class=\"token punctuation\">(</span>create_app<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n<p>å†æŒ‡å®š <code class=\"language-text\">æ‰§è¡Œæ–¹æ³•</code> ä¸º <code class=\"language-text\">serverless_handler.handler</code>ï¼Œå°± ok äº†</p>\n<h3 id=\"4-url_for-è¾“å‡º-http-è€Œé-https-çš„-url\" style=\"position:relative;\"><a href=\"#4-url_for-%E8%BE%93%E5%87%BA-http-%E8%80%8C%E9%9D%9E-https-%E7%9A%84-url\" aria-label=\"4 url_for è¾“å‡º http è€Œé https çš„ url permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. <code class=\"language-text\">url_for</code> è¾“å‡º <code class=\"language-text\">http</code> è€Œé <code class=\"language-text\">https</code> çš„ <code class=\"language-text\">URL</code></h3>\n<p>åœ¨è§†å›¾å‡½æ•°ä¸­é‡å®šå‘åˆ° <code class=\"language-text\">url_for</code> æ‰€ç”Ÿæˆçš„é“¾æ¥éƒ½æ˜¯ <code class=\"language-text\">http</code>ï¼Œè€Œä¸æ˜¯ <code class=\"language-text\">https</code>â€¦â€¦å…¶å®è¿™ä¸ªé—®é¢˜ <code class=\"language-text\">Flask</code> çš„æ–‡æ¡£ <a href=\"https://flask.palletsprojects.com/en/1.1.x/deploying/wsgi-standalone/\">Standalone WSGI Containers</a>æœ‰æè¿°åˆ°</p>\n<p>è¯´åˆ°åº•è¿™å¹¶ä¸æ˜¯ <code class=\"language-text\">Flask</code> çš„é—®é¢˜ï¼Œè€Œæ˜¯ <code class=\"language-text\">WSGI</code> ç¯å¢ƒæ‰€å¯¼è‡´çš„é—®é¢˜ï¼Œæ¨èçš„æ–¹æ³•æ˜¯ä½¿ç”¨<strong>ä¸­é—´ä»¶</strong>ï¼Œå®˜æ–¹ä¹Ÿç»™å‡ºäº† <code class=\"language-text\">ProxyFix</code></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"71405217957571550000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`from werkzeug.middleware.proxy_fix import ProxyFix\napp.wsgi_app = ProxyFix(app.wsgi_app, x_proto=1, x_host=1)`, `71405217957571550000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> werkzeug<span class=\"token punctuation\">.</span>middleware<span class=\"token punctuation\">.</span>proxy_fix <span class=\"token keyword\">import</span> ProxyFix\napp<span class=\"token punctuation\">.</span>wsgi_app <span class=\"token operator\">=</span> ProxyFix<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>wsgi_app<span class=\"token punctuation\">,</span> x_proto<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> x_host<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ä½†æ˜¯æ˜¯ä»<code class=\"language-text\">X-Forwarded-Proto</code>ä¸­å–çš„å€¼ï¼Œ<code class=\"language-text\">apigw</code>ä¸­å…¶ä¸º<code class=\"language-text\">http</code>ï¼Œå› æ­¤å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸ª<code class=\"language-text\">ProxyFix</code>\nå› ä¸º<code class=\"language-text\">Flask</code>çš„ç¤¾åŒºè¿˜ç®—å®Œå–„ï¼Œå‚è€ƒèµ„æ–™å¾ˆå¤šå‰äººéƒ½é“ºå¥½äº†è·¯ï¼Œæ‰€ä»¥ç›´æ¥å»<code class=\"language-text\">Stack Overflow</code>æœè§£å†³æ–¹æ³•ï¼Œ<a href=\"https://stackoverflow.com/questions/14810795/flask-url-for-generating-http-url-instead-of-https\">Flask url_for generating http URL instead of https</a>\né—®é¢˜å‡ºç°çš„åŸå› å¦‚å›¾ï¼š<code class=\"language-text\">Browser ----- HTTPS ----> Reverse proxyï¼ˆapigwï¼‰ ----- HTTP ----> Flask</code>\nå› ä¸ºè‡ªå·±åœ¨<code class=\"language-text\">apigw</code>è®¾ç½®äº†<code class=\"language-text\">å‰ç«¯ç±»å‹</code>ä»…<code class=\"language-text\">https</code>ï¼Œä¹Ÿå°±æ˜¯è¯´<code class=\"language-text\">Browser</code>ç«¯æ˜¯ä¸å¯èƒ½ä½¿ç”¨<code class=\"language-text\">http</code>è®¿é—®åˆ°çš„ï¼Œé€šè¿‡æ‰“å°<code class=\"language-text\">environ</code>å¯çŸ¥</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"18178288553554522000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`{\n  &quot;CONTENT_LENGTH&quot;: &quot;0&quot;,\n  &quot;CONTENT_TYPE&quot;: &quot;&quot;,\n  &quot;PATH_INFO&quot;: &quot;/&quot;,\n  &quot;QUERY_STRING&quot;: &quot;&quot;,\n  &quot;REMOTE_ADDR&quot;: &quot;&quot;,\n  &quot;REMOTE_USER&quot;: &quot;&quot;,\n  &quot;REQUEST_METHOD&quot;: &quot;GET&quot;,\n  &quot;SCRIPT_NAME&quot;: &quot;&quot;,\n  &quot;SERVER_NAME&quot;: &quot;maimai.yuangezhizao.cn&quot;,\n  &quot;SERVER_PORT&quot;: &quot;80&quot;,\n  &quot;SERVER_PROTOCOL&quot;: &quot;HTTP/1.1&quot;,\n  &quot;wsgi.errors&quot;: <__main__.CustomIO object at 0x7feda2224630>,\n  &quot;wsgi.input&quot;: <_io.BytesIO object at 0x7fed97093410>,\n  &quot;wsgi.multiprocess&quot;: False,\n  &quot;wsgi.multithread&quot;: False,\n  &quot;wsgi.run_once&quot;: False,\n  &quot;wsgi.url_scheme&quot;: &quot;http&quot;,\n  &quot;wsgi.version&quot;: (1, 0),\n  &quot;serverless.authorizer&quot;: None,\n  &quot;serverless.event&quot;: &quot;<rm>&quot;,\n  &quot;serverless.context&quot;: &quot;<rm>&quot;,\n  &quot;API_GATEWAY_AUTHORIZER&quot;: None,\n  &quot;event&quot;: &quot;<rm>&quot;,\n  &quot;context&quot;: &quot;<rm>&quot;,\n  &quot;HTTP_ACCEPT&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;,\n  &quot;HTTP_ACCEPT_ENCODING&quot;: &quot;gzip, deflate, br&quot;,\n  &quot;HTTP_ACCEPT_LANGUAGE&quot;: &quot;zh-CN,zh;q=0.9,en;q=0.8&quot;,\n  &quot;HTTP_CONNECTION&quot;: &quot;keep-alive&quot;,\n  &quot;HTTP_COOKIE&quot;: &quot;<rm>&quot;,\n  &quot;HTTP_ENDPOINT_TIMEOUT&quot;: &quot;15&quot;,\n  &quot;HTTP_HOST&quot;: &quot;maimai.yuangezhizao.cn&quot;,\n  &quot;HTTP_SEC_FETCH_DEST&quot;: &quot;document&quot;,\n  &quot;HTTP_SEC_FETCH_MODE&quot;: &quot;navigate&quot;,\n  &quot;HTTP_SEC_FETCH_SITE&quot;: &quot;none&quot;,\n  &quot;HTTP_SEC_FETCH_USER&quot;: &quot;?1&quot;,\n  &quot;HTTP_UPGRADE_INSECURE_REQUESTS&quot;: &quot;1&quot;,\n  &quot;HTTP_USER_AGENT&quot;: &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36&quot;,\n  &quot;HTTP_X_ANONYMOUS_CONSUMER&quot;: &quot;true&quot;,\n  &quot;HTTP_X_API_REQUESTID&quot;: &quot;5bcb29af2ca18c1e6d7b1ec5ff7b5427&quot;,\n  &quot;HTTP_X_API_SCHEME&quot;: &quot;https&quot;,\n  &quot;HTTP_X_B3_TRACEID&quot;: &quot;5bcb29af2ca18c1e6d7b1ec5ff7b5427&quot;,\n  &quot;HTTP_X_QUALIFIER&quot;: &quot;\\$LATEST&quot;\n}`, `18178288553554522000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"CONTENT_LENGTH\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"CONTENT_TYPE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"PATH_INFO\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"QUERY_STRING\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"REMOTE_ADDR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"REMOTE_USER\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"REQUEST_METHOD\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"SCRIPT_NAME\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"SERVER_NAME\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"maimai.yuangezhizao.cn\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"SERVER_PORT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"80\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"SERVER_PROTOCOL\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HTTP/1.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.errors\"</span><span class=\"token operator\">:</span> &lt;__main__.CustomIO object at 0x7feda2224630><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.input\"</span><span class=\"token operator\">:</span> &lt;_io.BytesIO object at 0x7fed97093410><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.multiprocess\"</span><span class=\"token operator\">:</span> False<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.multithread\"</span><span class=\"token operator\">:</span> False<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.run_once\"</span><span class=\"token operator\">:</span> False<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.url_scheme\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wsgi.version\"</span><span class=\"token operator\">:</span> (<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span>)<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"serverless.authorizer\"</span><span class=\"token operator\">:</span> None<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"serverless.event\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rm>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"serverless.context\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rm>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"API_GATEWAY_AUTHORIZER\"</span><span class=\"token operator\">:</span> None<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"event\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rm>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rm>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_ACCEPT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_ACCEPT_ENCODING\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gzip, deflate, br\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_ACCEPT_LANGUAGE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"zh-CN,zh;q=0.9,en;q=0.8\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_CONNECTION\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"keep-alive\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_COOKIE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rm>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_ENDPOINT_TIMEOUT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"15\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_HOST\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"maimai.yuangezhizao.cn\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_SEC_FETCH_DEST\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"document\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_SEC_FETCH_MODE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"navigate\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_SEC_FETCH_SITE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_SEC_FETCH_USER\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"?1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_UPGRADE_INSECURE_REQUESTS\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_USER_AGENT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_X_ANONYMOUS_CONSUMER\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_X_API_REQUESTID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5bcb29af2ca18c1e6d7b1ec5ff7b5427\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_X_API_SCHEME\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_X_B3_TRACEID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5bcb29af2ca18c1e6d7b1ec5ff7b5427\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"HTTP_X_QUALIFIER\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$LATEST\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">HTTP_X_FORWARDED_PROTO</code>å¯¹åº”<code class=\"language-text\">apigw</code>é‡Œçš„å˜é‡æ˜¯<code class=\"language-text\">HTTP_X_API_SCHEME</code>ï¼Œæ•…è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š<a href=\"https://github.com/yuangezhizao/maimai_DX_CN_probe/blob/4600b3d8212777cb6184c796c1967b3ea9b05997/src/maimai_DX_CN_probe/__init__.py#L36\">app.wsgi<em>app = ReverseProxied(app.wsgi</em>app)</a></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"91444032749453050000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`class ReverseProxied(object):\n    def __init__(self, app):\n        self.app = app\n\n    def __call__(self, environ, start_response):\n        scheme = environ.get('HTTP_X_FORWARDED_PROTO')\n        if scheme:\n            environ['wsgi.url_scheme'] = scheme\n        return self.app(environ, start_response)\n\napp = Flask(__name__)\napp.wsgi_app = ReverseProxied(app.wsgi_app)`, `91444032749453050000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ReverseProxied</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>app <span class=\"token operator\">=</span> app\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> environ<span class=\"token punctuation\">,</span> start_response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        scheme <span class=\"token operator\">=</span> environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'HTTP_X_FORWARDED_PROTO'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> scheme<span class=\"token punctuation\">:</span>\n            environ<span class=\"token punctuation\">[</span><span class=\"token string\">'wsgi.url_scheme'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> scheme\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">(</span>environ<span class=\"token punctuation\">,</span> start_response<span class=\"token punctuation\">)</span>\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>wsgi_app <span class=\"token operator\">=</span> ReverseProxied<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>wsgi_app<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"5-å“åº”æ•°æ®å‹ç¼©\" style=\"position:relative;\"><a href=\"#5-%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9\" aria-label=\"5 å“åº”æ•°æ®å‹ç¼© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. å“åº”æ•°æ®å‹ç¼©</h3>\n<p>ä¸è®ºæ˜¯<code class=\"language-text\">IIS</code>ã€<code class=\"language-text\">Apache</code>è¿˜æ˜¯<code class=\"language-text\">Nginx</code>ï¼Œéƒ½æä¾›æœ‰å‹ç¼©åŠŸèƒ½ã€‚æ¯•ç«Ÿè‡ªå·±åœ¨ç”¨çš„äº‘ä¸»æœºå¤–ç½‘ä¸Šè¡Œåªæœ‰<code class=\"language-text\">1M</code>å¸¦å®½ï¼Œå‹ç¼©åå¯¹äºç¼©çŸ­é¦–å±æ—¶é—´çš„æ•ˆæœæå‡æä¸ºæ˜¾è‘—ã€‚å¯¹äº<code class=\"language-text\">Serverless</code>ï¼Œå“åº”æ•°æ®æ˜¯é€šè¿‡<code class=\"language-text\">API Gateway</code>ä¼ è¾“åˆ°å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå‹ç¼©ä¹Ÿåº”è¯¥æ˜¯å®ƒæ‰€å…·å¤‡çš„èƒ½åŠ›ï¼ˆè™½ç„¶å¤–ç½‘é€Ÿåº¦å¤§å¹…åº¦æé«˜ï¼Œä½†æ˜¯è¯¥å‹ç¼©è¿˜æ˜¯å¾—å‹ç¼©ï¼‰ï¼Œç„¶è€Œå¹¶æ²¡æœ‰æ‰¾åˆ°â€¦â€¦çœ‹åˆ°æŸäº›<code class=\"language-text\">js</code>æ¡†æ¶åŸç”Ÿæœ‰æä¾›å‹ç¼©åŠŸèƒ½ï¼Œäºæ˜¯æ‰“ç®—æ·»åŠ <code class=\"language-text\">Flask</code>è‡ªè¡Œå‹ç¼©çš„åŠŸèƒ½ã€‚ç®€å•æ¥è®²ï¼Œé€šè¿‡è®¢é˜…<code class=\"language-text\">@app.after_request</code>ä¿¡å·å¹¶è°ƒç”¨ç¬¬ä¸‰æ–¹åº“<code class=\"language-text\">brotli</code>çš„<code class=\"language-text\">compress</code>æ–¹æ³•å³å¯ï¼ˆ\nåœ¨å†™ä¹‹å‰å»<code class=\"language-text\">gh</code>ä¸Šçœ‹çœ‹æœ‰æ²¡æœ‰ç°æˆçš„è½®å­æ‹“å±•ï¼Œæœç„¶æœ‰â€¦â€¦åˆšå¼€å§‹ç”¨çš„æ˜¯<code class=\"language-text\">Flask-Zipper</code>ï¼Œåæ¥æ¢æˆ<code class=\"language-text\">Flask-Compress</code>è§£å†³äº†é—®é¢˜\nå®æµ‹<code class=\"language-text\">3.1 MB</code>çš„æ•°æ®é‡‡ç”¨<code class=\"language-text\">brotli</code>å‹ç¼©ç®—æ³•å‡è‡³<code class=\"language-text\">76.1 kB</code></p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201023-223613@2x.png!webp\" alt=\"å‹ç¼©å‰\"></p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201023-224633@2x.png!webp\" alt=\"å‹ç¼©å\"></p>\n<p><img src=\"https://i1.yuangezhizao.cn/macOS/QQ20201023-224722@2x.png!webp\" alt=\"br\"></p>\n<h3 id=\"6-apigw-ä¸‰ç§ç¯å¢ƒä¸åŒè·¯å¾„æ‰€äº§ç”Ÿçš„å½±å“\" style=\"position:relative;\"><a href=\"#6-apigw-%E4%B8%89%E7%A7%8D%E7%8E%AF%E5%A2%83%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84%E6%89%80%E4%BA%A7%E7%94%9F%E7%9A%84%E5%BD%B1%E5%93%8D\" aria-label=\"6 apigw ä¸‰ç§ç¯å¢ƒä¸åŒè·¯å¾„æ‰€äº§ç”Ÿçš„å½±å“ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. <code class=\"language-text\">apigw</code> ä¸‰ç§ç¯å¢ƒä¸åŒè·¯å¾„æ‰€äº§ç”Ÿçš„å½±å“</h3>\n<p>é»˜è®¤çš„æ˜ å°„å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">ID</th>\n<th align=\"center\">ç¯å¢ƒå</th>\n<th align=\"center\">è®¿é—®è·¯å¾„</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">å‘å¸ƒ</td>\n<td align=\"center\">release</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">é¢„å‘å¸ƒ</td>\n<td align=\"center\">prepub</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">æµ‹è¯•</td>\n<td align=\"center\">test</td>\n</tr>\n</tbody>\n</table>\n<p>å› ä¸ºé…ç½®çš„<code class=\"language-text\">static_url_path</code>ä¸º<code class=\"language-text\">\"\"</code>ï¼Œå³<code class=\"language-text\">static</code>æ–‡ä»¶å¤¹æ˜¯æ˜ å°„åˆ°<code class=\"language-text\">/</code>è·¯å¾„ä¸‹çš„ï¼Œæ‰€ä»¥å†åŠ ä¸Š<code class=\"language-text\">release</code>ã€<code class=\"language-text\">prepub</code>å’Œ<code class=\"language-text\">test</code>è®¿é—®å°±è‡ªç„¶<code class=\"language-text\">404</code>äº†\nå› æ­¤ç»‘å®šäº†<code class=\"language-text\">è‡ªå®šä¹‰åŸŸå</code>ï¼Œ<code class=\"language-text\">ä½¿ç”¨è‡ªå®šä¹‰è·¯å¾„æ˜ å°„</code>ï¼Œå¹¶å°†<code class=\"language-text\">å‘å¸ƒ</code>ç¯å¢ƒçš„è®¿é—®è·¯å¾„è®¾ç½®æˆ<code class=\"language-text\">/</code>ï¼Œè¿™æ ·å†è®¿é—®<code class=\"language-text\">å‘å¸ƒ</code>ç¯å¢ƒå°±æ²¡æœ‰é—®é¢˜äº†</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">ID</th>\n<th align=\"center\">ç¯å¢ƒå</th>\n<th align=\"center\">è®¿é—®è·¯å¾„</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">å‘å¸ƒ</td>\n<td align=\"center\">/</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">é¢„å‘å¸ƒ</td>\n<td align=\"center\">prepub</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">æµ‹è¯•</td>\n<td align=\"center\">test</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"7-åŒæ—¶è®¿é—®ç§æœ‰ç½‘ç»œå’Œå¤–ç½‘\" style=\"position:relative;\"><a href=\"#7-%E5%90%8C%E6%97%B6%E8%AE%BF%E9%97%AE%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C%E5%92%8C%E5%A4%96%E7%BD%91\" aria-label=\"7 åŒæ—¶è®¿é—®ç§æœ‰ç½‘ç»œå’Œå¤–ç½‘ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. åŒæ—¶è®¿é—®<code class=\"language-text\">ç§æœ‰ç½‘ç»œ</code>å’Œ<code class=\"language-text\">å¤–ç½‘</code></h3>\n<p><code class=\"language-text\">äº‘å‡½æ•°</code>ä¸­å¯ä»¥åˆ©ç”¨åˆ°çš„äº‘ç«¯æ•°æ®åº“æœ‰å¦‚ä¸‹å‡ ç§</p>\n<ul>\n<li>äº‘æ•°æ®åº“<code class=\"language-text\">CDB</code>ï¼Œéœ€è¦<code class=\"language-text\">ç§æœ‰ç½‘ç»œ</code>è®¿é—®ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å¤–ç½‘è®¿é—®ä½†æ˜¯èƒ½èµ°å†…ç½‘å°±ä¸èµ°å¤–ç½‘</li>\n<li><code class=\"language-text\">PostgreSQL for Serverlessï¼ˆServerlessDBï¼‰</code>ï¼Œè¿™ä¸ªæ˜¯å®˜æ–¹ç»™<code class=\"language-text\">Serverless</code>é…çš„<code class=\"language-text\">pg</code>æ•°æ®åº“</li>\n<li>äº‘å¼€å‘<code class=\"language-text\">TCB</code>ä¸­çš„<code class=\"language-text\">MongoDB</code>ï¼Œæ²¡è®°é”™çš„è¯éœ€è¦å¼€é€šå†…æµ‹æƒé™è®¿é—®</li>\n</ul>\n<p>å› ä¸ºè‡ªå·±æ˜¯ä»æ—§ç½‘ç«™è¿ç§»è¿‡æ¥çš„ï¼Œæ•°æ®æš‚æ—¶è¿˜æ²¡æœ‰è¿ç§»ï¼Œå› æ­¤ç›´æ¥è®¿é—®åŸå§‹äº‘æ•°æ®åº“<code class=\"language-text\">CDB</code>ï¼Œåœ¨<code class=\"language-text\">äº‘å‡½æ•°</code>é…ç½®<code class=\"language-text\">æ‰€å±ç½‘ç»œ</code>å’Œ<code class=\"language-text\">æ‰€å±å­ç½‘</code>å³å¯ã€‚ä½†æ˜¯æ­¤æ—¶ä¼šæ— æ³•è®¿é—®å¤–ç½‘ï¼Œä¸€ç§è§£å†³æ–¹æ³•æ˜¯å¼€å¯<code class=\"language-text\">å…¬ç½‘è®¿é—®</code>å’Œ<code class=\"language-text\">å…¬ç½‘å›ºå®šIP</code>ï¼Œå°±å¯ä»¥åŒæ—¶è®¿é—®å†…ç½‘å’Œå¤–ç½‘èµ„æºäº†ã€‚å…³äºé…ç½®æ–‡ä»¶ï¼Œæœ¬é¡¹ç›®æ˜¯<code class=\"language-text\">å•å®ä¾‹åº”ç”¨</code>ä¹Ÿå°±æ˜¯è¯´<code class=\"language-text\">é¡¹ç›®ä¸­åªå¼•å…¥ä¸€ä¸ªç»„ä»¶ï¼Œéƒ¨ç½²æ—¶åªç”Ÿæˆä¸€ä¸ªç»„ä»¶å®ä¾‹</code>ã€‚ä½†æ˜¯å¦‚æœæƒ³å¼•å…¥æ•°æ®åº“çš„è¯ï¼Œå°±å¾—æ–°å¢ç»„ä»¶äº†ï¼Œç›®å‰åœ¨<code class=\"language-text\">Flask Components</code>ä¸­å¹¶æ²¡æœ‰æä¾›æ•°æ®åº“ç›¸å…³çš„é…ç½®é¡¹ï¼Œå› æ­¤éœ€è¦<code class=\"language-text\">é¡¹ç›®ä¸­å¼•å…¥å¤šä¸ªç»„ä»¶ï¼Œéƒ¨ç½²æ—¶ç”Ÿæˆå¤šä¸ªç»„ä»¶å®ä¾‹</code>ã€‚ä¹Ÿå¾ˆç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªå«æœ‰<code class=\"language-text\">serverless.yml</code>çš„æ–°æ–‡ä»¶å¤¹ï¼Œç”¨æ¥é…ç½®<code class=\"language-text\">postgresql</code></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"10631011410226821000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`component: postgresql # (å¿…å¡«) ç»„ä»¶åç§°ï¼Œæ­¤å¤„ä¸º postgresql\nname: maimai_DX_CN_probe # (å¿…é€‰) ç»„ä»¶å®ä¾‹åç§°.\norg: yuangezhizao # (å¯é€‰) ç”¨äºè®°å½•ç»„ç»‡ä¿¡æ¯ï¼Œé»˜è®¤å€¼ä¸ºæ‚¨çš„è…¾è®¯äº‘è´¦æˆ· appidï¼Œå¿…é¡»ä¸ºå­—ç¬¦ä¸²\napp: yuangezhizao # (å¯é€‰) ç”¨äºè®°å½•ç»„ç»‡ä¿¡æ¯. é»˜è®¤ä¸nameç›¸åŒï¼Œå¿…é¡»ä¸ºå­—ç¬¦ä¸²\nstage: dev # (å¯é€‰) ç”¨äºåŒºåˆ†ç¯å¢ƒä¿¡æ¯ï¼Œé»˜è®¤å€¼æ˜¯ dev\n\ninputs:\n  region: ap-beijing # å¯é€‰ ap-guangzhou, ap-shanghai, ap-beijing\n  zone: ap-beijing-3 # å¯é€‰ ap-guangzhou-2, ap-shanghai-2, ap-beijing-3\n  dBInstanceName: maimai_DX_CN_probe\n  #  projectId: 0\n  dBVersion: 10.4\n  dBCharset: UTF8\n  vpcConfig:\n    vpcId: vpc-mrg5ak88\n    subnetId: subnet-hqwa51dh\n  extranetAccess: false`, `10631011410226821000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> postgresql <span class=\"token comment\"># (å¿…å¡«) ç»„ä»¶åç§°ï¼Œæ­¤å¤„ä¸º postgresql</span>\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maimai_DX_CN_probe <span class=\"token comment\"># (å¿…é€‰) ç»„ä»¶å®ä¾‹åç§°.</span>\n<span class=\"token key atrule\">org</span><span class=\"token punctuation\">:</span> yuangezhizao <span class=\"token comment\"># (å¯é€‰) ç”¨äºè®°å½•ç»„ç»‡ä¿¡æ¯ï¼Œé»˜è®¤å€¼ä¸ºæ‚¨çš„è…¾è®¯äº‘è´¦æˆ· appidï¼Œå¿…é¡»ä¸ºå­—ç¬¦ä¸²</span>\n<span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> yuangezhizao <span class=\"token comment\"># (å¯é€‰) ç”¨äºè®°å½•ç»„ç»‡ä¿¡æ¯. é»˜è®¤ä¸nameç›¸åŒï¼Œå¿…é¡»ä¸ºå­—ç¬¦ä¸²</span>\n<span class=\"token key atrule\">stage</span><span class=\"token punctuation\">:</span> dev <span class=\"token comment\"># (å¯é€‰) ç”¨äºåŒºåˆ†ç¯å¢ƒä¿¡æ¯ï¼Œé»˜è®¤å€¼æ˜¯ dev</span>\n\n<span class=\"token key atrule\">inputs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>beijing <span class=\"token comment\"># å¯é€‰ ap-guangzhou, ap-shanghai, ap-beijing</span>\n  <span class=\"token key atrule\">zone</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>beijing<span class=\"token punctuation\">-</span><span class=\"token number\">3</span> <span class=\"token comment\"># å¯é€‰ ap-guangzhou-2, ap-shanghai-2, ap-beijing-3</span>\n  <span class=\"token key atrule\">dBInstanceName</span><span class=\"token punctuation\">:</span> maimai_DX_CN_probe\n  <span class=\"token comment\">#  projectId: 0</span>\n  <span class=\"token key atrule\">dBVersion</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10.4</span>\n  <span class=\"token key atrule\">dBCharset</span><span class=\"token punctuation\">:</span> UTF8\n  <span class=\"token key atrule\">vpcConfig</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">vpcId</span><span class=\"token punctuation\">:</span> vpc<span class=\"token punctuation\">-</span>mrg5ak88\n    <span class=\"token key atrule\">subnetId</span><span class=\"token punctuation\">:</span> subnet<span class=\"token punctuation\">-</span>hqwa51dh\n  <span class=\"token key atrule\">extranetAccess</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<p>ç„¶ååœ¨ç»ˆç«¯<code class=\"language-text\">cd</code>åˆ°è¿™ä¸ªç›®å½•å†æ‰§è¡Œ<code class=\"language-text\">sls deploy</code>å³å¯æˆåŠŸéƒ¨ç½²<code class=\"language-text\">postgresql</code></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"31342871537211560000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`yum install python3-devel postgresql-devel\npip install psycopg2`, `31342871537211560000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> python3-devel postgresql-devel\npip <span class=\"token function\">install</span> psycopg2</code></pre></div>\n<p>ç»“æœ</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"21424573558594460000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"ä»£ç å¤åˆ¶æˆåŠŸ\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`import psycopg2\nFile &quot;/opt/psycopg2/__init__.py&quot;, line 51, in &lt;module&gt;\nfrom psycopg2._psycopg import (                     # noqa\nImportError: libpython3.6m.so.1.0: cannot open shared object file: No such file or directory`, `21424573558594460000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                å¤åˆ¶ä»£ç <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> psycopg2\nFile <span class=\"token string\">\"/opt/psycopg2/__init__.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">51</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&amp;</span>lt<span class=\"token punctuation\">;</span>module<span class=\"token operator\">&amp;</span>gt<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">from</span> psycopg2<span class=\"token punctuation\">.</span>_psycopg <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>                     <span class=\"token comment\"># noqa</span>\nImportError<span class=\"token punctuation\">:</span> libpython3<span class=\"token punctuation\">.</span>6m<span class=\"token punctuation\">.</span>so<span class=\"token punctuation\">.</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">:</span> cannot <span class=\"token builtin\">open</span> shared <span class=\"token builtin\">object</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">:</span> No such <span class=\"token builtin\">file</span> <span class=\"token keyword\">or</span> directory</code></pre></div>\n<p>ä¸‹åˆ—é—®é¢˜å¤„äºè§£å†³ä¹‹ä¸­ï¼š</p>\n<ul>\n<li><code class=\"language-text\">http</code> å¼ºåˆ¶è·³è½¬ <code class=\"language-text\">https</code></li>\n<li>æµ‹è¯•ç¯å¢ƒæ¨é€è‡³ç”Ÿäº§ç¯å¢ƒ</li>\n</ul>\n<p>è‡³æ­¤ï¼Œæœ¬æ–‡å°±ç»“æŸäº†ï¼Œæ¬¢è¿<a href=\"https://www.yuangezhizao.cn/articles/python/flask/serverless/maimai_DX_CN_probe.html\">äº¤æµ</a>ï¼</p>\n<hr>\n<p>æ¬¢è¿è®¿é—®ï¼š<a href=\"https://serverlesscloud.cn/\">Serverless ä¸­æ–‡ç½‘</a>ï¼Œæ‚¨å¯ä»¥åœ¨ <a href=\"https://serverlesscloud.cn/best-practice\">æœ€ä½³å®è·µ</a> é‡Œä½“éªŒæ›´å¤šå…³äº Serverless åº”ç”¨çš„å¼€å‘ï¼</p>","tableOfContents":"<ul>\n<li><a href=\"/blog/2020-10-24-maimai/#%E5%89%8D%E8%A8%80\">å‰è¨€</a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#%E8%88%9E%E8%90%8C%E6%9F%A5%E5%88%86%E5%99%A8\">èˆèŒæŸ¥åˆ†å™¨</a></li>\n<li>\n<p><a href=\"/blog/2020-10-24-maimai/#%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B\">å¼€å‘è¿‡ç¨‹</a></p>\n<ul>\n<li><a href=\"/blog/2020-10-24-maimai/#1-serverless-framework-component-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\">1. <code class=\"language-text\">Serverless Framework Component</code> é…ç½®æ–‡ä»¶</a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#2-%E5%B1%82%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0\">2. å±‚ç®¡ç†æ¦‚è¿°</a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#3%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6\">3.è‡ªå®šä¹‰å…¥å£æ–‡ä»¶</a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#4-url_for-%E8%BE%93%E5%87%BA-http-%E8%80%8C%E9%9D%9E-https-%E7%9A%84-url\">4. <code class=\"language-text\">url_for</code> è¾“å‡º <code class=\"language-text\">http</code> è€Œé <code class=\"language-text\">https</code> çš„ <code class=\"language-text\">URL</code></a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#5-%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9\">5. å“åº”æ•°æ®å‹ç¼©</a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#6-apigw-%E4%B8%89%E7%A7%8D%E7%8E%AF%E5%A2%83%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84%E6%89%80%E4%BA%A7%E7%94%9F%E7%9A%84%E5%BD%B1%E5%93%8D\">6. <code class=\"language-text\">apigw</code> ä¸‰ç§ç¯å¢ƒä¸åŒè·¯å¾„æ‰€äº§ç”Ÿçš„å½±å“</a></li>\n<li><a href=\"/blog/2020-10-24-maimai/#7-%E5%90%8C%E6%97%B6%E8%AE%BF%E9%97%AE%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C%E5%92%8C%E5%A4%96%E7%BD%91\">7. åŒæ—¶è®¿é—®<code class=\"language-text\">ç§æœ‰ç½‘ç»œ</code>å’Œ<code class=\"language-text\">å¤–ç½‘</code></a></li>\n</ul>\n</li>\n</ul>"},"previousBlog":{"id":"1815bc3e-5905-507b-bc93-9c7d78b15496","frontmatter":{"thumbnail":"https://img.serverlesscloud.cn/2020115/1604567165601-spboot.jpg","authors":["Freeeeeedom"],"categories":["user-stories"],"date":"2020-10-25T00:00:00.000Z","title":"Springboot ä¹‹åŸºäº Serverless çš„è®¢å•åº”ç”¨","description":"Java æ˜¯æœ€å¥½çš„è¯­è¨€","authorslink":["https://freeeeeedom.github.io/"],"translators":null,"translatorslink":null,"tags":["Serverless","Springboot"],"keywords":null,"outdated":null},"wordCount":{"words":275,"sentences":65,"paragraphs":64},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2020-10-25-serverless-order.md","fields":{"slug":"/blog/2020-10-25-serverless-order/","keywords":["go","java","php","python","serverless","æ— æœåŠ¡å™¨","äº‘å‡½æ•°","å‡½æ•°","ç½‘å…³","éƒ¨ç½²","springboot","serverlesscloud","log"]}},"nextBlog":{"id":"71736d20-576b-51dd-91a2-141568372305","frontmatter":{"thumbnail":"https://img.serverlesscloud.cn/2020927/1601192579846-1601190052484-ServerlessDays%20PPT%E6%A8%A1%E6%9D%BF001.jpg","authors":["Johann SchleierSmith"],"categories":["user-stories"],"date":"2020-09-27T00:00:00.000Z","title":"æƒå¨æŒ‡å—ï¼šServerless æœªæ¥åå¹´å‘å±•è§£è¯» â€” ä¼¯å…‹åˆ©åˆ†æ ¡å®éªŒå®¤åˆ†äº«ï¼ˆä¸‹ï¼‰","description":"Johann åœ¨ ServerlessDays China çš„æ¼”è®²åˆ†äº«ï¼","authorslink":["https://www.zhihu.com/people/Aceyclee"],"translators":null,"translatorslink":null,"tags":["Serverless","ä¼¯å…‹åˆ©"],"keywords":"Serverless Framework,Serverless,SCF,Berkeley,åŠ å·å¤§å­¦,ä¼¯å…‹åˆ©åˆ†æ ¡,äº‘è®¡ç®—","outdated":null},"wordCount":{"words":431,"sentences":59,"paragraphs":59},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2020-09-27-slsdays-johann-2.md","fields":{"slug":"/blog/2020-09-27-slsdays-johann-2/","keywords":["serverless","äº‘å‡½æ•°","Serverless","serverlesscloud","åœºæ™¯","å­˜å‚¨","Cloudburst"]}},"recommendBlogs":{"edges":[{"node":{"id":"4d3fd74e-dae0-5c5c-b867-0e08fe545d2a","frontmatter":{"thumbnail":"https://main.qcloudimg.com/raw/14f1c8eed372e76c1b139703b2f6d0fa.jpg","authors":["KieranMcCarthy"],"categories":["user-stories","engineering-culture"],"date":"2018-01-09T00:00:00.000Z","title":"æˆ‘æ˜¯å¦‚ä½•åœ¨å››å¹´æ—¶é—´é‡Œï¼Œä»å¨å¸ˆè½¬è¡Œä¸º Serverless åº”ç”¨å¼€å‘è€…","description":"æˆ‘æ˜¯å¨å¸ˆå‡ºèº«ï¼Œç°åœ¨æˆä¸ºäº†ä¸€å Serverless åº”ç”¨å¼€å‘è€…ã€‚","authorslink":["https://serverless.com/author/kieranmccarthy/"],"translators":["Aceyclee"],"translatorslink":["https://www.zhihu.com/people/Aceyclee"],"tags":["åº”ç”¨å¼€å‘","Serverless"],"keywords":"Serverless åº”ç”¨å¼€å‘,Serverless ç®¡ç†,å¨å¸ˆè½¬è¡Œä¸º Serverless åº”ç”¨å¼€å‘è€…","outdated":null},"wordCount":{"words":285,"sentences":38,"paragraphs":36},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2018-01-09-from-chef-to-serverless-developer-in-4-years.md","fields":{"slug":"/blog/2018-01-09-from-chef-to-serverless-developer-in-4-years/","keywords":["æ— æœåŠ¡å™¨","æ— æœåŠ¡å™¨å¼€å‘","äº‘å‡½æ•°","å­¦ä¹ ","Serverless","æ„å»º","Framework","å¼€å‘è€…","æœåŠ¡å™¨","åº”ç”¨","å­¦ä½","ç®€å†"]}}},{"node":{"id":"0401d5e2-6fce-5465-9697-590f0446fcbd","frontmatter":{"thumbnail":"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/camp-fire/camp-fire-housing-thumb.jpg","authors":["EricWyne"],"categories":["guides-and-tutorials","user-stories"],"date":"2018-12-05T00:00:00.000Z","title":"Serverless Twitter æœºå™¨äººå¸®åŠ©ä¸ºåæ™®å±±ç«å—ç¾è€…å®‰ç½®ä½æˆ¿","description":"åŠ åˆ©ç¦å°¼äºšå·çš„åæ™®å±±ç«è‡´ä½¿æ•°åƒäººæµç¦»å¤±æ‰€ï¼Œä¸ºæ­¤ï¼Œæˆ‘æ„å»ºäº†ä¸€ä¸ªç®€å•çš„ Serverless Twitter æœºå™¨äººæ¥å¸®åŠ©å°†å—ç¾è€…å®‰ç½®åœ¨ä¸´æ—¶ä½æˆ¿ï¼","authorslink":["https://serverless.com/author/ericwyne/"],"translators":["Aceyclee"],"translatorslink":["zhihu.com/people/Aceyclee"],"tags":null,"keywords":null,"outdated":null},"wordCount":{"words":157,"sentences":26,"paragraphs":26},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2018-12-05-serverless-twitter-camp-fire.md","fields":{"slug":"/blog/2018-12-05-serverless-twitter-camp-fire/","keywords":["serverless","æ— æœåŠ¡å™¨","äº‘å‡½æ•°","Serverless","org","ä½æˆ¿","Twitter","å‡½æ•°","å—ç¾","æœºå™¨äºº","å±±ç«"]}}},{"node":{"id":"05a3027c-7a26-5673-89dd-da9626c37931","frontmatter":{"thumbnail":"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/sqquid/sqquid-serverless-thumb.jpg","authors":["RonPeled"],"categories":["user-stories"],"date":"2018-12-17T00:00:00.000Z","title":"SQQUIDï¼š100% æ— æœåŠ¡å™¨åˆåˆ›å…¬å¸","description":"SQQUID å°† AWS Lambda å’Œæ— æœåŠ¡å™¨æ¡†æ¶ç”¨äºå…¶æ ¸å¿ƒäº§å“å’Œè¥é”€ç½‘ç«™ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå®Œå…¨æ— æœåŠ¡å™¨çš„åˆåˆ›å…¬å¸æ˜¯æ€æ ·çš„ã€‚","authorslink":null,"translators":null,"translatorslink":null,"tags":null,"keywords":null,"outdated":null},"wordCount":{"words":266,"sentences":42,"paragraphs":42},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2018-12-17-sqquid-one-hundred-percent-serverless.md","fields":{"slug":"/blog/2018-12-17-sqquid-one-hundred-percent-serverless/","keywords":["go","serverless","æ— æœåŠ¡å™¨","æ— æœåŠ¡å™¨æ¶æ„","æœåŠ¡å™¨","æ¶æ„","Lambda","é›†æˆ","FaaS","ä¸²è¡Œ","ç³»ç»Ÿ"]}}},{"node":{"id":"c2f8453b-aa28-5c56-80ad-16477c8dc625","frontmatter":{"thumbnail":"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/ao-com-story/ao-serverless-thumbnail.png","authors":["NickGottlieb"],"categories":["user-stories"],"date":"2019-04-24T00:00:00.000Z","title":"AO.comï¼šé€æ¸è½¬å‘æ— æœåŠ¡å™¨ä¼˜å…ˆ","description":"AO.com çš„ SCV å›¢é˜Ÿç‡å…ˆå°è¯•æ— æœåŠ¡å™¨æœåŠ¡ã€‚æŠ˜æœäºæ— æœåŠ¡å™¨æ¡†æ¶çš„å¿«é€Ÿå‘¨è½¬æ—¶é—´å’Œä½ç»´æŠ¤æˆæœ¬ï¼Œæ•´ä¸ªå›¢é˜Ÿé€æ¸è½¬å‘æ— æœåŠ¡å™¨ä¼˜å…ˆã€‚","authorslink":null,"translators":null,"translatorslink":null,"tags":null,"keywords":null,"outdated":null},"wordCount":{"words":236,"sentences":42,"paragraphs":35},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2019-04-24-ao-serverless-first.md","fields":{"slug":"/blog/2019-04-24-ao-serverless-first/","keywords":["serverless","æ— æœåŠ¡å™¨","æœåŠ¡å™¨","å›¢é˜Ÿ","Lambda","åŠŸèƒ½","æ„å»º","serverless"]}}},{"node":{"id":"031c13d2-89dc-5535-8709-4f6d7c8f3ed3","frontmatter":{"thumbnail":"https://img.serverlesscloud.cn/2020414/1586871710979-%E5%85%AC%E5%85%B1%E7%94%A8.png","authors":["Anycodes"],"categories":["user-stories"],"date":"2019-06-20T00:00:00.000Z","title":"å¦‚ä½•ç”¨ Serverless ä¸º Python äº‘å‡½æ•°æ‰“åŒ…ä¾èµ–","description":"åœ¨ä½¿ç”¨æ— æœåŠ¡å™¨äº‘å‡½æ•°SCFæ—¶é€šå¸¸ä¼šé‡åˆ°å¯¼å…¥ç¬¬ä¸‰æ–¹åº“çš„é—®é¢˜ï¼Œå¾ˆå¤šå°ä¼™ä¼´æ¯”è¾ƒå¤´ç–¼æ˜¯ï¼šåº”è¯¥å¦‚ä½•æ‰“åŒ…è¿›å»ï¼Ÿè¿™é‡Œï¼Œæ¨èå‡ ä¸ªä¸é”™çš„æ–¹æ³•ã€‚","authorslink":["https://zhuanlan.zhihu.com/ServerlessGo"],"translators":null,"translatorslink":null,"tags":["äº‘å‡½æ•°","Serverless"],"keywords":"Serverless,Serverlessåº”ç”¨,æ— æœåŠ¡å™¨äº‘å‡½æ•°","outdated":null},"wordCount":{"words":81,"sentences":43,"paragraphs":43},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2019-06-20-for-python-cloud-functions.md","fields":{"slug":"/blog/2019-06-20-for-python-cloud-functions/","keywords":["java","serverless","æ— æœåŠ¡å™¨","æ— æœåŠ¡å™¨äº‘å‡½æ•°","äº‘å‡½æ•°","serverlesscloud","å®‰è£…","serverless","pillowtest"]}}},{"node":{"id":"e8a106f1-0fb0-535a-91a8-2159ff292493","frontmatter":{"thumbnail":"https://img.serverlesscloud.cn/qianyi/YHl6UWa9s62sLCrvZhrtRH5BpLicw7aUOFcf8AVCXXFd1r1Gs9AgoXkqPY0icjL9koxzxcJ8RFiagsQnQdc29IKvg.jpg","authors":["æè‰³åš"],"categories":["user-stories"],"date":"2019-07-02T00:00:00.000Z","title":"è…¾è®¯äº‘å‡½æ•°è®¿é—® VPC ç½‘ç»œæ¶æ„ä¼˜åŒ–","description":"æ–‡ç« æ•´ç†è‡ªè…¾è®¯äº‘ä¸“å®¶å·¥ç¨‹å¸ˆå‘¨ç»´è·ƒåŠè…¾è®¯äº‘é«˜çº§å·¥ç¨‹å¸ˆæè‰³åšåœ¨ Kubecon 2019 ä¸Šçš„åˆ†äº«,æœ¬ç¯‡æ–‡ç« åˆ†äº«äº‘å‡½æ•°è®¿é—® VPC ç½‘ç»œæ–¹é¢çš„ä¼˜åŒ–ã€‚","authorslink":["https://zhuanlan.zhihu.com/ServerlessGo"],"translators":null,"translatorslink":null,"tags":["ç½‘ç»œæ¶æ„","Serverless"],"keywords":"Serverless,serverless framework,è…¾è®¯äº‘serverless","outdated":null},"wordCount":{"words":188,"sentences":35,"paragraphs":35},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2019-07-02-function-access-vpc-network-architecture-optimization.md","fields":{"slug":"/blog/2019-07-02-function-access-vpc-network-architecture-optimization/","keywords":["go","serverless","å‡½æ•°è®¡ç®—","è…¾è®¯äº‘å‡½æ•°è®¡ç®—","æ— æœåŠ¡å™¨","äº‘å‡½æ•°","å‡½æ•°","ç½‘å¡","å…¬ç½‘","è®¿é—®","å®¢æˆ·","å¼¹æ€§","åˆ›å»º"]}}},{"node":{"id":"0626099b-4ddc-5917-b525-5c590194312e","frontmatter":{"thumbnail":"https://img.serverlesscloud.cn/qianyi/b96CibCt70iaaJcib7FH02wTKvoHALAMw4f553WgrmrmItKmjkMfO2fI0YJcpdO2WibwHXYAOGZyMaQruxD3skk7icQ.jpg","authors":["ecky"],"categories":["user-stories"],"date":"2019-07-04T00:00:00.000Z","title":"åŸºäºã€Œæ ‘è“æ´¾+è…¾è®¯äº‘ã€çš„åœ¨çº¿ç”²é†›ç›‘æµ‹ç³»ç»Ÿ","description":"æœ¬æ–‡è¯¦è¿°è…¾è®¯äº‘å¤šäº§å“ç»„åˆè®¾è®¡å’Œä½“éªŒæŠ¥å‘Š ä¹‹ â€œæ ‘è“æ´¾+è…¾è®¯äº‘=åœ¨çº¿ç”²é†›ç›‘æµ‹ç³»ç»Ÿâ€ã€‚æ¶‰åŠè…¾è®¯äº‘äº§å“ï¼šAPIç½‘å…³ã€æ— æœåŠ¡å™¨äº‘å‡½æ•°ã€äº‘æ•°æ®åº“ã€è…¾è®¯äº‘å›¾ã€‚","authorslink":["https://zhuanlan.zhihu.com/ServerlessGo"],"translators":null,"translatorslink":null,"tags":["æ ‘è“æ´¾","Serverless"],"keywords":"Serverless,serverless framework,è…¾è®¯äº‘serverless","outdated":null},"wordCount":{"words":378,"sentences":118,"paragraphs":118},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2019-07-04-online-formaldehyde-monitoring-system.md","fields":{"slug":"/blog/2019-07-04-online-formaldehyde-monitoring-system/","keywords":["go","java","python","serverless","æ— æœåŠ¡å™¨","æ— æœåŠ¡å™¨äº‘å‡½æ•°","äº‘å‡½æ•°","javascript","serverlesscloud"]}}},{"node":{"id":"bbb6752a-bbbf-5636-8940-2dc263bfc179","frontmatter":{"thumbnail":"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/serverless-guru-case-study/serverless-guru-case-study-thumb.png","authors":["NickGottlieb"],"categories":["user-stories"],"date":"2019-07-09T00:00:00.000Z","title":"BuildCenter å’Œ Serverless Guru å¦‚ä½•ç®€åŒ–æ— æœåŠ¡å™¨å¼€å‘å‘¨æœŸ","description":"BuildCenter ä¸ºæ„å»ºè€…æä¾›æ•°å­—å·¥å…·ã€‚äº†è§£ Serverless Guru å¦‚ä½•ä½¿ç”¨æ— æœåŠ¡å™¨æ¡†æ¶å¸®åŠ©æ„å»ºè€…ç®€åŒ–æ“ä½œã€‚","authorslink":null,"translators":null,"translatorslink":null,"tags":null,"keywords":null,"outdated":null},"wordCount":{"words":381,"sentences":48,"paragraphs":48},"fileAbsolutePath":"/Users/zhangxuewen/serverlesscloud.cn/content/blog/2019-07-09-buildcenter-serverless-development-cycle.md","fields":{"slug":"/blog/2019-07-09-buildcenter-serverless-development-cycle/","keywords":["serverless","å•é¡µåº”ç”¨","æ— æœåŠ¡å™¨","Serverless","Guru","æœåŠ¡å™¨","BuildCenter","serverless","å †æ ˆ","æ¡†æ¶"]}}}],"totalCount":64}},"pageContext":{"blogId":"02c7ba25-6867-540a-9f8c-8db94e76b912","previousBlogId":"1815bc3e-5905-507b-bc93-9c7d78b15496","nextBlogId":"71736d20-576b-51dd-91a2-141568372305","categories":["user-stories"]}},"staticQueryHashes":["126728070","2100134136","2811614389"]}